<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Client for Proxy</title>
</head>
<body>

<p><input id="command" placeholder="Command" size="100" width="200px"/></p>
<p><input id="data" placeholder="data" size="100" width="200px"/></p>
<p><button onclick="send()">Send</button></p>

<script>

    let wsclient = null;

    setupConnection();
    function setupConnection() {
        wsclient = new WebSocket(`ws://localhost:8010/platform`);
        wsclient.onopen = open;
        wsclient.onerror = error;
        wsclient.onmessage = message;
        wsclient.onclose = close;
    }

    function open() {

    }

    function error() {

    }

    function message(response) {

    }

    function close() {
        setTimeout(setupConnection, 3000);
    }


    function send() {

        const request = {
            command: document.querySelector('#command').value,
            data: JSON.parse(document.querySelector('#data').value)
        };


        try {
            wsclient.send(JSON.stringify(request));
        } catch (e) {

        }
    }

</script>
</body>
</html>